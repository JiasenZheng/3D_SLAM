<launch>
    <!-- export JACKAL_URDF_EXTRAS=$HOME/Desktop/realsense.urdf.xacro -->
    <arg name = "use_rviz" default = "true" doc = "whether to use rviz"/>

    <include file="$(find velodyne_pointcloud)/launch/VLP16_points.launch">
	<arg name="organize_cloud" value="true"/>
   </include>
    <include file="$(find realsense2_camera)/launch/rs_camera.launch">
	<arg name = "align_depth" value="true"/>

	<!--<arg name = "unite_imu_method" value = "linear_interpolation"/>-->
	<!--<arg name = "enable_gyro" value = "true"/>-->
	<!--<arg name = "enable_accel" value = "true"/>-->
    </include>
    <node pkg="tf" type="static_transform_publisher" name="base2velodyne" args="0 0 0.3 0 0 0 /base_link /velodyne 100" />
    <node pkg="tf" type="static_transform_publisher" name="base2color" args="0 0.1 0.3 0 0 0 /base_link /camera_color_optical_frame 100" />
    <node pkg="tf" type="static_transform_publisher" name="base2depth" args="0 0.1 0.3 0 0 0 /base_link /camera_depth_optical_frame 100" />
	
   <!-- <node pkg="imu_filter_madgwick" name="imu_filter_node" type="imu_filter_node" args="-_use_mag false -_publish_tf false -_world enu -/imu/data_raw /camera/imu -/imu/data /rtabmap/imu"/> -->\


    <!-- load pid gains yaml file -->
    <rosparam command = "load" file = "$(find slam)/config/pid_gains.yaml"/>

    <include file = "$(find jackal_base)/launch/base.launch"/>
    <!-- include jackal description launch file -->
   

    <!-- include jackal control launch file -->
   <!-- <include file = "$(find jackal_control)/launch/control.launch"/> -->


    <!-- launch jackal control teleop.launch -->
   <!-- <include file = "$(find jackal_control)/launch/teleop.launch"> -->
       <!-- <arg name = "joystick" value="false"/> -->
   <!-- </include> -->


    <!-- launch rtabmap -->
    <include file = "$(find slam)/launch/3d_odom_rtabmap.launch"/>

    <!-- launch move_base -->
    <include file = "$(find slam)/launch/move_base.launch"/>


    <node name = "rviz" pkg = "rviz" type = "rviz" args="-d $(find slam)/config/jackal.rviz" if = "$(arg use_rviz)"/>
<!-- 
    <node name="urdf_spawner" pkg="gazebo_ros" type="spawn_model"
	      args="-urdf -model jackal -param robot_description -x 0.0 -y 0.0 -z 1.0" /> -->
</launch>
